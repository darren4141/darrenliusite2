<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My PCB Projects</title>
  <link rel="stylesheet" href="projectstylesheet.css" />
  <link rel="stylesheet" href="pcbviewer.css" />
  <script type="module" src="kicanvas.js"></script>
  <script src="pcbviewer.js" defer></script>
</head>
<body>
  <div class="project-content">
    <a href="index.html" class="close-button">&times;</a>
    <div class="project-text">
      <h1>My PCB's</h1>
      <h3>(click + drag to rotate)</h3>

      <!-- STM32 -->
      <div class="pcb-viewer">
        <h2>STM32-Based Flight Controller</h2>
        <img id="viewer1" src="PCBanimation/STM32_FC_Board/board render0.webp" alt="STM32 Viewer" width="100%">
        <button class="view-btn" onclick="resetViewer(0)">Reset View</button>
        <button class="view-btn" id="toggle-rotate-0" onclick="toggleRotation(0)">Rotation: ON</button>
        <button class="view-btn" onclick="showModal('modal-stm32')">View Schematic</button>
        <button class="view-btn" onclick="showModal('modal-stm32-pcb')">View PCB Layout</button>
        <h3>Features:</h3>
        <p>- SPI bus to interface with a BMI270 IMU and an NRF24L01 module</p>
        <p>- 14 pin SWD programming</p>
        <p>- Bidirectional DRV motor drivers</p>
        <p>- 3.3V LDO power regulator</p>
        <p>- Onboard status LED's</p>
      </div>

      <!-- ESP32 -->
      <div class="pcb-viewer">
        <h2>ESP32-Based Flight Controller</h2>
        <img id="viewer2" src="PCBanimation/ESP32_FC_Board/board render213.webp" alt="ESP32 Viewer" width="100%">
        <button class="view-btn" onclick="resetViewer(1)">Reset View</button>
        <button class="view-btn" id="toggle-rotate-1" onclick="toggleRotation(1)">Rotation: ON</button>
        <button class="view-btn" onclick="showModal('modal-esp32')">View Schematic</button>
        <button class="view-btn" onclick="showModal('modal-esp32-pcb')">View PCB Layout</button>
        <h3>Features:</h3>
        <p>- I2C to interface with MPU6050 IMU</p>
        <p>- USB-C programming made possible by CP2102N USB-UART bridge</p>
        <p>- MOSFET motor drivers</p>
        <p>- 3.3V LDO power regulator</p>
        <p>- Automatic source switching for input from either 5V USB input or 3.7V battery input with anti-backfeeding</p>
        <p>- Onboard status LED's</p>
      </div>

      <!-- Differential -->
      <div class="pcb-viewer">
        <h2>Differential Drivetrain Breakout Board</h2>
        <img id="viewer3" src="PCBanimation/Diff_Breakout_Board/board render0.webp" alt="Differential Viewer" width="100%">
        <button class="view-btn" onclick="resetViewer(2)">Reset View</button>
        <button class="view-btn" id="toggle-rotate-2" onclick="toggleRotation(2)">Rotation: ON</button>
        <button class="view-btn" onclick="showModal('modal-diff')">View Schematic</button>
        <button class="view-btn" onclick="showModal('modal-diff-pcb')">View PCB Layout</button>
        <h3>Features:</h3>
        <p>- Phase-enable drive for 6 motors using L293D H-Bridges and MOSFET inverters</p>
        <p>- Buck converter setup to step 9V down to 6V + 3.3V LDO regulator</p>
        <p>- Onboard status LED's</p>
      </div>

      <!-- Coil Driver -->
      <div class="pcb-viewer">
        <h2>Coil Driver Board</h2>
        <img id="viewer4" src="PCBanimation/Coil_Driver_Board/board render0.webp" alt="Coil Driver Viewer" width="100%">
        <button class="view-btn" onclick="resetViewer(3)">Reset View</button>
        <button class="view-btn" id="toggle-rotate-3" onclick="toggleRotation(3)">Rotation: ON</button>
        <button class="view-btn" onclick="showModal('modal-coil')">View Schematic</button>
        <button class="view-btn" onclick="showModal('modal-coil-pcb')">View PCB Layout</button>
        <h3>Features:</h3>
        <p>- IR sensor with adjustable sensitivity</p>
        <p>- OP-AMP based IR sensor driver</p>
        <p>- MOSFET + OP-AMP comparator based 32V coil driver</p>
      </div>
    </div>
  </div>

  <!-- Modals -->
  <div id="modal-stm32" class="modal"><div class="modal-content"><kicanvas-embed controls="full" theme="kicad"><kicanvas-source src="schematics/stm32_fc.kicad_sch"></kicanvas-source></kicanvas-embed></div></div>
  <div id="modal-stm32-pcb" class="modal"><div class="modal-content"><kicanvas-embed controls="full" theme="kicad"><kicanvas-source src="layouts/stm32_fc.kicad_pcb"></kicanvas-source></kicanvas-embed></div></div>

  <div id="modal-esp32" class="modal"><div class="modal-content"><kicanvas-embed controls="full" theme="kicad"><kicanvas-source src="schematics/esp32_fc.kicad_sch"></kicanvas-source></kicanvas-embed></div></div>
  <div id="modal-esp32-pcb" class="modal"><div class="modal-content"><kicanvas-embed controls="full" theme="kicad"><kicanvas-source src="layouts/esp32_fc.kicad_pcb"></kicanvas-source></kicanvas-embed></div></div>

  <div id="modal-diff" class="modal"><div class="modal-content"><kicanvas-embed controls="full" theme="kicad"><kicanvas-source src="schematics/diff_breakout.kicad_sch"></kicanvas-source></kicanvas-embed></div></div>
  <div id="modal-diff-pcb" class="modal"><div class="modal-content"><kicanvas-embed controls="full" theme="kicad"><kicanvas-source src="layouts/diff_breakout.kicad_pcb"></kicanvas-source></kicanvas-embed></div></div>

  <div id="modal-coil" class="modal"><div class="modal-content"><kicanvas-embed controls="full" theme="kicad"><kicanvas-source src="schematics/coil_driver.kicad_sch"></kicanvas-source></kicanvas-embed></div></div>
  <div id="modal-coil-pcb" class="modal"><div class="modal-content"><kicanvas-embed controls="full" theme="kicad"><kicanvas-source src="layouts/coil_driver.kicad_pcb"></kicanvas-source></kicanvas-embed></div></div>

</body>
</html>
